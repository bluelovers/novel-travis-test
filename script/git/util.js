"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.getPushUrlGitee = exports.getPushUrl = exports.branchNameToDate = void 0;
const git_1 = require("../git");
const token_1 = require("./token");
const moment = require("moment");
function branchNameToDate(br_name) {
    return moment(br_name.replace(/^.*auto\//, ''), git_1.DATE_FORMAT);
}
exports.branchNameToDate = branchNameToDate;
function getPushUrl(url, login_token) {
    if (login_token && !/@$/.test(login_token)) {
        login_token += '@';
    }
    return `https://${login_token ? login_token : ''}${url}`;
}
exports.getPushUrl = getPushUrl;
function getPushUrlGitee(url, login_token = token_1.GIT_TOKEN) {
    return getPushUrl(url, login_token);
}
exports.getPushUrlGitee = getPushUrlGitee;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInV0aWwudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsZ0NBQXFDO0FBQ3JDLG1DQUFvQztBQUNwQyxpQ0FBa0M7QUFFbEMsU0FBZ0IsZ0JBQWdCLENBQUMsT0FBZTtJQUUvQyxPQUFPLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsRUFBRSxpQkFBVyxDQUFDLENBQUE7QUFDN0QsQ0FBQztBQUhELDRDQUdDO0FBRUQsU0FBZ0IsVUFBVSxDQUFDLEdBQVcsRUFBRSxXQUFvQjtJQUUzRCxJQUFJLFdBQVcsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQzFDO1FBQ0MsV0FBVyxJQUFJLEdBQUcsQ0FBQztLQUNuQjtJQUVELE9BQU8sV0FBVyxXQUFXLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLEdBQUcsRUFBRSxDQUFDO0FBQzFELENBQUM7QUFSRCxnQ0FRQztBQUVELFNBQWdCLGVBQWUsQ0FBQyxHQUFXLEVBQUUsY0FBc0IsaUJBQVM7SUFFM0UsT0FBTyxVQUFVLENBQUMsR0FBRyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQ3JDLENBQUM7QUFIRCwwQ0FHQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IERBVEVfRk9STUFUIH0gZnJvbSAnLi4vZ2l0JztcbmltcG9ydCB7IEdJVF9UT0tFTiB9IGZyb20gJy4vdG9rZW4nO1xuaW1wb3J0IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudCcpO1xuXG5leHBvcnQgZnVuY3Rpb24gYnJhbmNoTmFtZVRvRGF0ZShicl9uYW1lOiBzdHJpbmcpXG57XG5cdHJldHVybiBtb21lbnQoYnJfbmFtZS5yZXBsYWNlKC9eLiphdXRvXFwvLywgJycpLCBEQVRFX0ZPUk1BVClcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFB1c2hVcmwodXJsOiBzdHJpbmcsIGxvZ2luX3Rva2VuPzogc3RyaW5nKVxue1xuXHRpZiAobG9naW5fdG9rZW4gJiYgIS9AJC8udGVzdChsb2dpbl90b2tlbikpXG5cdHtcblx0XHRsb2dpbl90b2tlbiArPSAnQCc7XG5cdH1cblxuXHRyZXR1cm4gYGh0dHBzOi8vJHtsb2dpbl90b2tlbiA/IGxvZ2luX3Rva2VuIDogJyd9JHt1cmx9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFB1c2hVcmxHaXRlZSh1cmw6IHN0cmluZywgbG9naW5fdG9rZW46IHN0cmluZyA9IEdJVF9UT0tFTilcbntcblx0cmV0dXJuIGdldFB1c2hVcmwodXJsLCBsb2dpbl90b2tlbik7XG59XG4iXX0=