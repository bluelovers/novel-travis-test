language: node_js
node_js:
- '10'
cache:
  directories:
  - ".cache"
  - dist_novel
  - dist_epub
before_install:
- git config --global user.email "testbot@test.test"
- git config --global user.name "testbot"
- npm i -g yarn
install:
- yarn
before_script: 
script:
- git --version
- travis_wait 30 npm run do-git-init
- npm run do-task
- travis_wait 30 npm run do-epub-init
- npm run do-epub
- travis_wait 30 npm run do-epub-push
env:
  global:
  - CLONE_DEPTH=50
  - secure: UAenmkUSzNUy8hDsWxoPxUJNT2Aj8dsb91APmf8v0he/3nOfG58nyS3KFmDSJA1JR1AxV/isIx6dyT1ypFY0cbUFK2yXB7mZTpCTsWEKkpfbEQL+6GsYJILIe6ZwFIu4p3P9Dub9K04AiRplXAKf5yMXeg6JaLpT4mqTUNsFsjBbYbzRcvaPCnNC/zGCfH2umVymXxPrKv1xa3A/NlP9sldXkVeYfiJVm5lGMu1dUXQMfvzI7+skrC1Y0DMeU7evAC7AYMs8BdrVYcfkoIO8rjY7syZWLSk3gEP0zMU0oVkktZfMgULnM0s72XJivp+dqr9uxqF/P1qA4hvEDFVt+76fUqRPsOIyRjfmRz62K7+oLXUrUold7K9EiXqrsm/jQuQPjbe2WY6DA7q+cLjWdPEtAmIvL1NRAjT4A+6k026TD3sUEsCTw6TAe1r/V4b8b0lMGSpIGVmX2of4a7UEy358WHWyyPRvhZ+rErnlGlcJfJFNQwpVhRvKDtEA1ztVi5IlB0VCUU2HvpfcdE78AJ484Lrsk70m/z8bHUo+ueWg9jWyWCo7EwWwZb6cN1/x5GpK++N0vP3xTePT9E/435RBanHc8B8Q0qJbLI+t3P1iVVoWb4G51yOIsjbOP2pAisR23+FECSP73Gk7p4JS1rETL7IkHEZm4Fv5mvjIzt8=
  - secure: TF4acg8uwQ8+c436iO11N/ssdKlM8X3+yt7qDS90fvZUII09hAUYMtqE1ygj6QduMhxXlY2W+OhA8JO/lD4uVh+6qZ4mqNNeImIaycHQd0mTD4wp6stf5WzTupFJUw+CQYEdeZBJcwim8rHvIGKNfNna283+AjdmbjQjeDtUqW6HCZAW5/1a5pjWMvVVlVtnYTsjSD0p/6g3fva7yJ+o5gBjeBTK1oEMuPzNbupYKgFL4SWSolGqK5gv6gA1NhLmhgo16RbEVIoZs/zu3pnNEEbcYG3M/r96BoFNlcSugHsR3tkxBIIpbvPuRDgrYYNzlFvPoJ2m0jjXFa2GpaaUfcmF4xZlzrTR6nm7bnMJVsKS/zxQ/O12sjUn/N322EgNMd5aj56I5mkuKJi4IRxOmIPxEBD0WHnCUUczmEsf2gYSMcfBG1PA6SlGwgVY5Mm9SN9z6fnpHJNiNctgihm+0hW8nr4CcQygHllMi+fnTtvnQFoZUw6fEUH8DtHWUCR8/NLf5fWN+qmFeG8Npwv/ws6tLfcpj9aeMBtc8sDKX1QFQm2rLCFNDcgzcdbPNdPB4HrJny9Cz9ePuqaDuuYh98Xj3AXMRR1A6A0bDXj+q+kAONNAburj9z4mhBTQEIrw5+VJ0FvvAuz1WGQoSsW61K2R/lZJCDduXU2o7M2+r7c=
  - secure: D5kBG3FsB6xbiSIhFIF03/wETyWVpj/zSkocg7OhyHY1akkrtb86JFkUy5XPTGByusoZ0YRXiQuQIen7mEOGvuEQhNeyKGMW0A3fR8/TUwa9qrLvcQhMvzOCa1PXbRMM9HkUPoMWPtM2WdHaZac5bDInFjgRUHJMb+PZ/MC/bF/PlEsIOhErex1AeCSS8/5BleHRQjIlOITAVDG7P7FdztvxhgT4Xq3TAHIp31ca5XzfHzNBAUuC5XvgFzUBoFBM47koLMTjhd4lvgh1HvuA9e10811Uj+40YLAe7VYRrqFgLLjefV3QuSN8JoLcolUocC5ZqyKPw6PpPXL3lO9c3f6qg+fsG6ZOrYAfrHlVuc0E6D/rcEj4d+Mfm1GwwAMmY+sUW0AyFA6ORv9fGqiOF0ou6ySP71xqtLzR20oMNoKBrKecS9uiGQLc3IolbDQWk5uhoCFfH4zwr/fVIr1ptPwSO9uQgAf6S4HOq1soz/r3leSZTA707KseGn5sXadr7fevu9zAgIbGW6wPtxVTlCAq0llieYX5nmXag2ttsMiCKnHmuaZKsOzJ/zmNOgFuLeeg4m5gshc+fpEI6PToMt7WwJ/e4eJIArGJSuOaZ3Tc8uiOAcUDNO7wc1EAFNz9RtmWD/cZNFVKg6AMSUwmdm8M/uIMBuoGpgHMARqtzWE=
  - secure: lpfya3arqsuPpmDCxHVDpNXyXk9F5DHTTq+4O72T+7u8E1/g4dIIWaBbETYZ4QT2StrizV6fPKjAtaB3JMDzMoyb5dbiaejmAD8eyaIIQvv3SmOau86vWKOW3Y2WLbRH55ue2E4dPLvpQD3qGJwla32X9LufbDNkP1XLy8h59yhfFyVYuGED9SfCJa+2Gki04brYM1VR6yMuLJrdqHJbNa63K+C9gcu7W0OoomND55ODz4RfbjgIY8KYHD8TbSo+uTVC0cMYCiSOmUfKBYWdGbIwhOEMUkDD6LPnfhaC7MgrAEFEM5G+Znl8Gk4D96v+rU7+96rIKZ6G4uA9WVzpR/Czl71hQW+QQDDOf1RvHEuZjY177XIlxaqT9gF1akaM/56ZvjwDisWK4kjUP2gDy4/js2W7B81N76C73RkekZVJRXVJvTuz6RdNhPdm7sJtYnL3fna+bghVvIip4CbQeL9KN5bOwcSCcNNM76tVMJI/FH0bzuFa6Ca+5rVXEXR32ZVgNeB0u/FRbMcfhswWLTdq6IoJPW529Q957Wkw4r2jlwDR3sWTWuL+WqlajOjV2fJkNDeVTnf16Du8Xv+P7sycvd5dvtAy86LvzeiHSiYCdf3kuAh1M/DACnsseqK2p81kLYSHzA39dacYvh32NsqIWKkpH4/KOq0W0mmBs8g=
  - secure: HREFd1giXvLR0e+BUvf4V4IC65mkuR44N0rFFzjwoj7ezl1veDc7syR8i/UyhZc80VAruRf5ahse7bPLe9PgpHT7jCPlFr2jNOftiDsgzQ68AX7EERexVNKGHUzNFYuWF7W+Dz7rD9fo8pVx/rwRU3wcvUDjBZGTz/J7OwdCTBvFrKyK5V/60Y9KTbemSFQr/Zwl2djvHzRyhLHSOdY54RrQBBILvnH09glYWG5dmUdftW3WuvYuhTXJO05IY6X5ZNmVKZo7hq1HBd9hB0fyb9hp1OvQ4DyKRJxEgADifwk33U86F6GDfbEPphpxwJF0E6GQ22bIJMJAFB219d/iGKiK0UA3ulFVOOXm2glBbPpeE8xYf3B9+wkW7hMK8O966hn3SOZ8mnUqa0zJMUQt2fVGPXAShYRZgrkicfa/6Hxxp2yR6gdzMIyESSWffblqsg3jKkV3EonUKGo7dqa2gbPx0ASHhQ5dsjCVdpaZbOrm/blRkRSOIeOI8E4yf4g5E/MzBAvVJbpSdccU8gXxjHslSEfK2EiDzu38SLlc0z1E34eSjsn1gEvFUEowpyIS3CV2b1+Od9IxZV5KbzASQxxUk0oGKMf8w3TIUAER/XWJ519/gM77mPQnaXpbPBTxWgFwTnGqzvXc3OOlcAPqR2cfUVPJpXk8kZKdVKGmlsY=
